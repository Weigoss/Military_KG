!function(p){p.fn.autocomplete=function(o){var h=-1,n=[];return o=p.extend({hints:[],placeholder:"Search",width:200,height:16,showButton:!0,buttonText:"Search",onSubmit:function(t){},onBlur:function(){}},o),this.each(function(){var t=p("<div></div>").addClass("autocomplete-container").css("height",2*o.height),l=p('<input type="text" autocomplete="off" name="query">').attr("placeholder",o.placeholder).addClass("autocomplete-input").css({width:o.width,height:o.height});o.showButton&&l.css("border-radius","3px 0 0 3px");var e=p("<div></div>").addClass("proposal-box").css("width",o.width+18).css("top",l.height()+20),a=p("<ul></ul>").addClass("proposal-list");if(e.append(a),l.keydown(function(t){switch(t.which){case 38:t.preventDefault(),p("ul.proposal-list li").removeClass("selected"),0<=h-1?p("ul.proposal-list li:eq("+--h+")").addClass("selected"):h=-1;break;case 40:t.preventDefault(),h+1<n.length&&(p("ul.proposal-list li").removeClass("selected"),p("ul.proposal-list li:eq("+ ++h+")").addClass("selected"));break;case 13:if(-1<h){var e=p("ul.proposal-list li:eq("+h+")").html();l.val(e)}h=-1,a.empty(),o.onSubmit(l.val());break;case 27:h=-1,a.empty(),l.val("")}}),l.bind("paste keyup",function(t){if(13!=t.which&&27!=t.which&&38!=t.which&&40!=t.which&&(n=[],h=-1,a.empty(),""!=l.val())){var e="^"+l.val()+".*";for(var i in a.empty(),o.hints)if(o.hints[i].match(e)){n.push(o.hints[i]);var s=p("<li></li>").html(o.hints[i]).addClass("proposal").click(function(){l.val(p(this).html()),a.empty(),o.onSubmit(l.val())}).mouseenter(function(){p(this).addClass("selected")}).mouseleave(function(){p(this).removeClass("selected")});a.append(s)}}}),l.blur(function(t){h=-1,o.onBlur()}),t.append(l),t.append(e),o.showButton){var i=p("<div></div>").addClass("autocomplete-button").html(o.buttonText).css({height:o.height+2,"line-height":o.height+"px"}).click(function(){a.empty(),o.onSubmit(l.val())});t.append(i)}p(this).append(t),o.showButton&&t.css("width",o.width+i.width()+50)}),this}}(jQuery);